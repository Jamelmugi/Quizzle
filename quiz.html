<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Jam Quiz üéÑ</title>
<style>
  :root{--card-width:420px}
  html,body{height:100%;margin:0}
  body{
    font-family: 'Poppins', sans-serif;
    background: linear-gradient(135deg,#ffeef0 0%, #ffe4e1 100%);
    display:flex;align-items:center;justify-content:center;
  }
  .container{
    width:var(--card-width);
    background:#fff;
    border-radius:16px;
    padding:26px;
    box-shadow:0 8px 30px rgba(0,0,0,0.12);
    text-align:center;
    position:relative;
  }
  h2{color:#222;margin:0 0 16px;font-size:20px}
  #answers{display:flex;flex-wrap:wrap;justify-content:center;gap:10px}
  button.opt{
    padding:10px 16px;border-radius:10px;border:0;cursor:pointer;font-size:15px;
    background:#f0f0f0;
  }
  button.opt:hover{transform:translateY(-2px)}
  input[type="text"]{padding:10px;width:86%;border-radius:10px;border:2px solid #ddd;text-align:center;font-size:15px}
  #submitBtn{margin-top:12px;padding:10px 18px;border-radius:10px;border:0;background:#4caf50;color:#fff;cursor:pointer}
  #failImg{max-width:100%;margin-top:14px;border-radius:12px;display:none}
  #feedback{margin-top:10px;color:#c0392b;display:none}
  /* Fullscreen video overlay */
  #videoOverlay{
    display:none;
    position:fixed;inset:0;
    background:#000;align-items:center;justify-content:center;z-index:9999;
  }
  #videoOverlay video{max-width:98%;max-height:98%;border-radius:8px}
  /* final screen */
  .final{
    padding:26px;
  }
  .btn-link{display:inline-block;margin-top:12px;padding:10px 16px;border-radius:10px;background:#4f9440;color:#fff;text-decoration:none}
</style>
</head>
<body>
  <div class="container" id="quizCard">
    <h2 id="question">L√§dt‚Ä¶</h2>
    <div id="answers"></div>

    <div id="textArea" style="margin-top:10px; display:none;">
      <input type="text" id="textAnswer" placeholder="Deine Antwort hier" autocomplete="off">
      <div><button id="submitBtn" onclick="checkTextAnswer()">Best√§tigen</button></div>
    </div>

    <div id="feedback"></div>
    <img id="failImg" src="assets/fail.jpg" alt="Fail" />
  </div>

  <!-- Fullscreen overlay f√ºr Videos -->
  <div id="videoOverlay">
    <video id="overlayVideo" playsinline></video>
  </div>

  <!-- Sounds -->
  <audio id="failSound" src="assets/fail.mp3"></audio>
  <audio id="successSound" src="assets/yes.mp3"></audio>

<script>
/* ====== Fragen ====== */
const questions = [
  {q:"Wer ist Jamels Mama?", type:"mc", options:["Kerstin","Anna","Maria","Lisa"], correct:["Kerstin"]},
  {q:"Welches Essen vertr√§gt Jamel mega?", type:"mc", options:["Banane","Avocado","Pizza","Burger"], correct:["Banane","Avocado"]},
  {q:"Jamels Lieblingss√º√üspeise?", type:"mc", options:["Honig","Schokolade","Gummib√§rchen","Karamell"], correct:["Honig"]},
  {q:"Jamel sucht in jedem Markt nach‚Ä¶", type:"mc", options:["Grape Soda","Cola","Wasser","Saft"], correct:["Grape Soda"]},
  {q:"Jamels Lieblings ungesunde S√º√üspeise?", type:"mc", options:["Donuts","Eis","Schokoriegel","Kekse"], correct:["Donuts"]},
  {q:"Was tut Jam am meisten?", type:"mc", options:["Essen","Schlafen","Zocken","Sport"], correct:["Essen"]},
  {q:"Was ist Jamels Lieblingswort?", type:"text", correct:"nigga"},
  {q:"Bombo‚Ä¶", type:"mc", options:["ball","clatt","bean","boy"], correct:["clatt"]},
  {q:"Enny ist s√ºchtig nach‚Ä¶", type:"multi", options:["Jamels Handy","Essen","TikTok Reels","Jamel","Netflix"], correct:["Jamels Handy","Essen","TikTok Reels","Jamel"]},
  {q:"Enny ist die ‚Ä¶ Freundin", type:"mc", options:["Beste","Sch√∂nste","S√º√üeste","D√ºmste"], correct:["Beste","Sch√∂nste","S√º√üeste","D√ºmste"]}
];

let current = 0;
let multiCorrect = [];

/* ====== Utility: shuffle ====== */
function shuffle(arr){
  const a = arr.slice();
  for(let i=a.length-1;i>0;i--){
    const j = Math.floor(Math.random()*(i+1));
    [a[i],a[j]] = [a[j],a[i]];
  }
  return a;
}

/* ====== Anzeige der Frage ====== */
function showQuestion(){
  hideFeedback();
  hideFailImg();

  const q = questions[current];
  document.getElementById('question').innerText = q.q;
  const answersDiv = document.getElementById('answers');
  answersDiv.innerHTML = '';
  document.getElementById('textArea').style.display = 'none';
  document.getElementById('textAnswer').value = '';

  if(q.type === 'mc'){
    const opts = shuffle([...q.options]);
    opts.forEach(opt=>{
      const btn = document.createElement('button');
      btn.className = 'opt';
      btn.innerText = opt;
      btn.onclick = ()=> checkMC(opt);
      answersDiv.appendChild(btn);
    });
  } else if(q.type === 'text'){
    document.getElementById('textArea').style.display = 'block';
  } else if(q.type === 'multi'){
    const opts = shuffle([...q.options]);
    opts.forEach(opt=>{
      const btn = document.createElement('button');
      btn.className = 'opt';
      btn.innerText = opt;
      btn.onclick = ()=> checkMulti(opt, btn);
      answersDiv.appendChild(btn);
    });
  }
}

/* ====== Pr√ºf-Funktionen ====== */
function checkMC(opt){
  const q = questions[current];
  if(q.correct.includes(opt)){
    playSuccess();
    // spezieller fall: Bombo -> fullscreen video -> weiter danach
    if(q.q.toLowerCase().includes('bombo')){
      hideQuizCard();
      playVideoFullscreen('assets/bombo.mp4', ()=>{
        showQuizCard();
        nextQuestion();
      });
      return;
    }
    nextQuestion();
  } else {
    showFail();
  }
}

function checkTextAnswer(){
  const q = questions[current];
  const val = document.getElementById('textAnswer').value.toLowerCase().trim();
  if(val === q.correct.toLowerCase()){
    playSuccess();
    // spezieller fall: Lieblingswort -> Justcant.mp4 fullscreen
    if(q.q.toLowerCase().includes('lieblingswort')){
      hideQuizCard();
      playVideoFullscreen('assets/Justcant.mp4', ()=>{
        showQuizCard();
        nextQuestion();
      });
      return;
    }
    setTimeout(nextQuestion, 300);
  } else {
    showFail();
  }
}

function checkMulti(opt, btn){
  const q = questions[current];
  if(q.correct.includes(opt)){
    btn.style.background = '#86e07c';
    if(!multiCorrect.includes(opt)) multiCorrect.push(opt);
    if(multiCorrect.length === q.correct.length){
      multiCorrect = [];
      playSuccess();
      setTimeout(nextQuestion, 300);
    }
  } else {
    showFail();
  }
}

/* ====== Feedback Funktionen ====== */
function showFail(){
  const img = document.getElementById('failImg');
  const s = document.getElementById('failSound');
  img.style.display = 'block';
  try{ s.currentTime = 0; s.play(); }catch(e){}
  // kleines visuelles Feedback entfernen nach 1.8s
  setTimeout(()=>{ img.style.display = 'none'; }, 1800);
}
function hideFailImg(){ document.getElementById('failImg').style.display = 'none'; }
function hideFeedback(){ document.getElementById('feedback').style.display = 'none'; }

/* ====== Sounds ====== */
function playSuccess(){
  const s = document.getElementById('successSound');
  try{ s.currentTime = 0; s.play(); }catch(e){}
}

/* ====== Fullscreen Video Overlay ====== */
function playVideoFullscreen(src, callback){
  const overlay = document.getElementById('videoOverlay');
  const vid = document.getElementById('overlayVideo');

  // set up
  vid.pause();
  vid.src = src;
  vid.controls = false;
  vid.playsInline = true;
  overlay.style.display = 'flex';

  // Try to play; if blocked, the user can tap the overlay to start
  const playPromise = vid.play();
  const onEnded = ()=>{
    vid.removeEventListener('ended', onEnded);
    overlay.style.display = 'none';
    vid.src = '';
    if(callback) callback();
  };
  vid.addEventListener('ended', onEnded);

  if(playPromise !== undefined){
    playPromise.catch(()=> {
      // Autoplay blocked -> let user tap to start
      overlay.addEventListener('click', function listener(){
        overlay.removeEventListener('click', listener);
        vid.play().catch(()=>{ /* ignore */ });
      });
    });
  }
}

/* ====== Show/Hide quiz card during videos ====== */
function hideQuizCard(){ document.getElementById('quizCard').style.display = 'none'; }
function showQuizCard(){ document.getElementById('quizCard').style.display = 'block'; }

/* ====== Weiter / Ende ====== */
function nextQuestion(){
  current++;
  if(current < questions.length){
    showQuestion();
  } else {
    showFinalScreen();
  }
}

function showFinalScreen(){
  const root = document.getElementById('quizCard');
  root.innerHTML = `
    <div class="final">
      <h2>üéâ Du hast das Quiz geschafft, Enny ‚ù§Ô∏è</h2>
      <p>Gut gemacht ‚Äî danke f√ºrs Mitmachen!</p>
      <a class="btn-link" href="index.html">Zur√ºck zur Startseite</a>
    </div>
  `;
}

/* ====== Init ====== */
document.addEventListener('DOMContentLoaded', ()=>{
  // kleine precaution: ensure overlay exists and is clickable on mobile
  const overlay = document.getElementById('videoOverlay');
  overlay.addEventListener('click', ()=> {
    // if video paused because autoplay blocked, clicking the overlay tries to play
    const vid = document.getElementById('overlayVideo');
    if(vid.paused) vid.play().catch(()=>{});
  });
  showQuestion();
});
</script>
</body>
</html>


