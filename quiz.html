<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Jam Quiz ðŸŽ„</title>
<style>
  body { font-family: 'Poppins', sans-serif; background: #ffe4e1; display:flex; justify-content:center; align-items:center; height:100vh; margin:0; }
  .container { background:white; padding:30px; border-radius:20px; box-shadow:0 4px 20px rgba(0,0,0,0.2); width:400px; text-align:center; z-index:1; position:relative;}
  h2 { color:#444; margin-bottom:20px; }
  button { margin:5px; padding:10px 20px; border:none; border-radius:10px; cursor:pointer; font-size:16px; }
  button:hover { opacity:0.8; }
  input { padding:10px; width:80%; border:2px solid #ccc; border-radius:10px; text-align:center; font-size:16px; }
  #feedback { margin-top:15px; color:red; display:none; }
  img { max-width:100%; margin-top:15px; border-radius:15px; }
  #videoOverlay { display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:black; justify-content:center; align-items:center; z-index:9999; }
  #videoOverlay video { max-width:90%; max-height:90%; border-radius:10px; }
</style>
</head>
<body>

<div class="container">
  <h2 id="question">Frage erscheint hier</h2>
  <div id="answers"></div>
  <input type="text" id="textAnswer" style="display:none;" placeholder="Deine Antwort hier">
  <button id="submitBtn" style="display:none;" onclick="checkTextAnswer()">BestÃ¤tigen</button>
  <div id="feedback"></div>

  <img id="failImg" src="assets/fail.jpg" style="display:none;">
  <audio id="failSound" src="assets/fail.mp3"></audio>
  <audio id="successSound" src="assets/yes.mp3"></audio>
</div>

<div id="videoOverlay">
  <video id="overlayVideo" controls></video>
</div>

<script>
const questions = [
  {q:"Wer ist Jamels Mama?", type:"mc", options:["Kerstin","Anna","Maria","Lisa"], correct:["Kerstin"]},
  {q:"Welches Essen vertrÃ¤gt Jamel mega?", type:"mc", options:["Banane","Avocado","Pizza","Burger"], correct:["Banane","Avocado"]},
  {q:"Jamels LieblingssÃ¼ÃŸspeise?", type:"mc", options:["Honig","Schokolade","GummibÃ¤rchen","Karamell"], correct:["Honig"]},
  {q:"Jamel sucht in jedem Markt nachâ€¦", type:"mc", options:["Grape Soda","Cola","Wasser","Saft"], correct:["Grape Soda"]},
  {q:"Jamels Lieblings ungesunde SÃ¼ÃŸspeise?", type:"mc", options:["Donuts","Eis","Schokoriegel","Kekse"], correct:["Donuts"]},
  {q:"Was tut Jam am meisten?", type:"mc", options:["Essen","Schlafen","Zocken","Sport"], correct:["Essen"]},
  {q:"Was ist Jamels Lieblingswort?", type:"text", correct:"nigga"},
  {q:"Bomboâ€¦", type:"mc", options:["ball","clatt","bean","boy"], correct:["clatt"]},
  {q:"Enny ist sÃ¼chtig nachâ€¦", type:"multi", options:["Jamels Handy","Essen","TikTok Reels","Jamel","Netflix"], correct:["Jamels Handy","Essen","TikTok Reels","Jamel"]},
  {q:"Enny ist die â€¦ Freundin", type:"mc", options:["Beste","SchÃ¶nste","SÃ¼ÃŸeste","DÃ¼mste"], correct:["Beste","SchÃ¶nste","SÃ¼ÃŸeste","DÃ¼mste"]}
];

let current = 0;
let multiCorrect = [];

// shuffle Funktion fÃ¼r Randomisierung
function shuffle(array){
  for(let i = array.length - 1; i > 0; i--){
    const j = Math.floor(Math.random() * (i + 1));
    [array[i], array[j]] = [array[j], array[i]];
  }
  return array;
}

function showQuestion(){
  document.getElementById("feedback").style.display="none";
  document.getElementById("failImg").style.display="none";

  const q = questions[current];
  document.getElementById("question").innerText = q.q;
  const answersDiv = document.getElementById("answers");
  answersDiv.innerHTML = "";
  document.getElementById("textAnswer").style.display="none";
  document.getElementById("submitBtn").style.display="none";

  if(q.type==="mc"){
    let opts = shuffle([...q.options]);
    opts.forEach(opt=>{
      const btn = document.createElement("button");
      btn.innerText = opt;
      btn.onclick = () => checkMC(opt);
      answersDiv.appendChild(btn);
    });
  } else if(q.type==="text"){
    document.getElementById("textAnswer").style.display="block";
    document.getElementById("submitBtn").style.display="block";
  } else if(q.type==="multi"){
    let opts = shuffle([...q.options]);
    opts.forEach(opt=>{
      const btn = document.createElement("button");
      btn.innerText = opt;
      btn.onclick = () => checkMulti(opt, btn);
      answersDiv.appendChild(btn);
    });
  }
}

function checkMC(opt){
  const q = questions[current];
  if(q.correct.includes(opt)){
    playSuccess();
    if(q.q.includes("Bombo")) { 
      playVideoFullscreen("assets/bombo.mp4", nextQuestion);
      return;
    }
    nextQuestion();
  } else {
    showFail();
  }
}

function checkTextAnswer(){
  const q = questions[current];
  const val = document.getElementById("textAnswer").value.toLowerCase().trim();
  
  if(val === q.correct.toLowerCase()){
    playSuccess();

    if(q.q.includes("Lieblingswort")) { 
      // Quiz ausblenden
      document.querySelector(".container").style.display = "none";

      // Fullscreen Video abspielen
      playVideoFullscreen("assets/justcant.mp4", () => {
        // Nach Video Quiz wieder anzeigen und nÃ¤chste Frage
        document.querySelector(".container").style.display = "block";
        nextQuestion();
      });
      return;
    }

    setTimeout(nextQuestion, 500);
  } else {
    showFail();
  }
}


function checkMulti(opt, btn){
  const q = questions[current];
  if(q.correct.includes(opt)){
    btn.style.background="green";
    if(!multiCorrect.includes(opt)) multiCorrect.push(opt);
    if(multiCorrect.length === q.correct.length){
      multiCorrect = [];
      playSuccess();
      nextQuestion();
    }
  } else {
    showFail();
  }
}

function showFail(){
  const img = document.getElementById("failImg");
  const sound = document.getElementById("failSound");
  img.style.display="block";
  sound.currentTime=0;
  sound.play();
}

function playSuccess(){
  const sound = document.getElementById("successSound");
  sound.currentTime=0;
  sound.play();
}

<script>
function playVideo(videoFile, callback) {
  // Video-Container erstellen
  const videoContainer = document.createElement("div");
  videoContainer.style.position = "fixed";
  videoContainer.style.top = "0";
  videoContainer.style.left = "0";
  videoContainer.style.width = "100vw";
  videoContainer.style.height = "100vh";
  videoContainer.style.backgroundColor = "black";
  videoContainer.style.display = "flex";
  videoContainer.style.justifyContent = "center";
  videoContainer.style.alignItems = "center";
  videoContainer.style.zIndex = "9999";

  // Video-Element
  const video = document.createElement("video");
  video.src = "assets/" + videoFile;
  video.style.maxWidth = "100%";
  video.style.maxHeight = "100%";
  video.autoplay = true;
  video.controls = false;
  video.playsInline = true; // wichtig fÃ¼r iPhone
  video.onended = () => {
    document.body.removeChild(videoContainer);
    if (callback) callback();
  };

  videoContainer.appendChild(video);
  document.body.appendChild(videoContainer);

  // Falls Autoplay blockiert -> Klick erlaubt starten
  video.play().catch(() => {
    videoContainer.addEventListener("click", () => {
      video.play();
    });
  });
}
</script>


function nextQuestion(){
  current++;
  if(current < questions.length){
    showQuestion();
  } else {
    document.querySelector(".container").innerHTML = "<h2>ðŸŽ‰ Du hast das Quiz abgeschlossen! ðŸŽ‰</h2>";
  }
}

// Start
showQuestion();
</script>
</body>
</html>

